<!DOCTYPE html>
<html>
<head>
    <title>Snake</title>
    <style>
        body {
            margin: 0;
            padding: 10px;
            background: #000;
            color: #0f0;
            font-family: Arial, sans-serif;
            text-align: center;
        }
        canvas {
            border: 2px solid #0f0;
            background: #000;
            display: block;
            margin: 10px auto;
        }
        .score {
            font-size: 22px;
            margin: 5px;
        }
        .btn {
            background: #000;
            color: #0f0;
            border: 1px solid #0f0;
            padding: 8px 16px;
            margin: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .controls {
            margin-top: 10px;
        }
        .dir-btn {
            width: 60px;
            height: 60px;
            font-size: 22px;
            margin: 3px;
        }
    </style>
</head>
<body>

<div class="score">SCORE: <span id="score">0</span></div>

<canvas id="game" width="450" height="450"></canvas>

<div>
    <button class="btn" onclick="startGame()">START</button>
    <button class="btn" onclick="togglePause()">PAUSE</button>
</div>

<div class="controls">
    <div>
        <button class="btn dir-btn" onclick="changeDir(0,-1)">↑</button>
    </div>
    <div>
        <button class="btn dir-btn" onclick="changeDir(-1,0)">←</button>
        <button class="btn dir-btn" onclick="changeDir(0,1)">↓</button>
        <button class="btn dir-btn" onclick="changeDir(1,0)">→</button>
    </div>
</div>

<div style="font-size:12px;color:#888;margin-top:8px">
    Arrows / WASD / Buttons
</div>

<script>
/* ===== BASIC SETUP ===== */
var canvas = document.getElementById("game");
var ctx = canvas.getContext("2d");

var grid = 22.5;
var cells = canvas.width / grid;

var snake;
var dir;
var food;
var score;
var running = false;
var paused = false;
var loop;

/* ===== DRAW ===== */
function draw() {
    ctx.fillStyle = "#000";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Snake
    ctx.fillStyle = "#0f0";
    for (var i = 0; i < snake.length; i++) {
        ctx.fillRect(
            snake[i].x * grid,
            snake[i].y * grid,
            grid - 1,
            grid - 1
        );
    }

    // Food
    ctx.fillStyle = "#f00";
    ctx.fillRect(
        food.x * grid,
        food.y * grid,
        grid - 1,
        grid - 1
    );
}

/* ===== UPDATE ===== */
function update() {
    if (!running || paused) return;
    if (dir.x === 0 && dir.y === 0) return;

    var head = {
        x: snake[0].x + dir.x,
        y: snake[0].y + dir.y
    };

    // Wrap
    if (head.x < 0) head.x = cells - 1;
    if (head.x >= cells) head.x = 0;
    if (head.y < 0) head.y = cells - 1;
    if (head.y >= cells) head.y = 0;

    snake.unshift(head);

    // Food
    if (head.x === food.x && head.y === food.y) {
        score += 10;
        document.getElementById("score").innerHTML = score;
        newFood();
    } else {
        snake.pop();
    }

    // Self collision
    for (var i = 4; i < snake.length; i++) {
        if (head.x === snake[i].x && head.y === snake[i].y) {
            gameOver();
            return;
        }
    }

    draw();
}

/* ===== FOOD ===== */
function newFood() {
    food = {
        x: Math.floor(Math.random() * cells),
        y: Math.floor(Math.random() * cells)
    };
}

/* ===== START ===== */
function startGame() {
    snake = [
        { x: Math.floor(cells / 2), y: Math.floor(cells / 2) }
    ];
    dir = { x: 0, y: 0 };
    score = 0;
    paused = false;
    running = true;

    document.getElementById("score").innerHTML = score;

    newFood();
    clearInterval(loop);
    loop = setInterval(update, 150);

    draw();
}

/* ===== PAUSE ===== */
function togglePause() {
    if (!running) return;
    paused = !paused;

    if (paused) {
        ctx.fillStyle = "#ff0";
        ctx.font = "24px Arial";
        ctx.textAlign = "center";
        ctx.fillText("PAUSED", canvas.width / 2, canvas.height / 2);
    }
}

/* ===== GAME OVER ===== */
function gameOver() {
    running = false;
    clearInterval(loop);

    ctx.fillStyle = "#f00";
    ctx.font = "26px Arial";
    ctx.textAlign = "center";
    ctx.fillText("GAME OVER", canvas.width / 2, canvas.height / 2 - 20);
    ctx.fillStyle = "#0f0";
    ctx.font = "16px Arial";
    ctx.fillText("Score: " + score, canvas.width / 2, canvas.height / 2 + 10);
}

/* ===== DIRECTION ===== */
function changeDir(x, y) {
    if (dir.x !== 0 && x !== 0) return;
    if (dir.y !== 0 && y !== 0) return;
    dir = { x: x, y: y };
}

/* ===== KEYBOARD ===== */
document.onkeydown = function(e) {
    e = e || window.event;

    if ([37,38,39,40,65,68,83,87,32].indexOf(e.keyCode) !== -1) {
        e.preventDefault();
    }

    if (e.keyCode === 37 || e.keyCode === 65) changeDir(-1, 0);
    if (e.keyCode === 38 || e.keyCode === 87) changeDir(0, -1);
    if (e.keyCode === 39 || e.keyCode === 68) changeDir(1, 0);
    if (e.keyCode === 40 || e.keyCode === 83) changeDir(0, 1);
    if (e.keyCode === 32) togglePause();
};

/* ===== INTRO ===== */
draw();
ctx.fillStyle = "#0f0";
ctx.font = "26px Arial";
ctx.textAlign = "center";
ctx.fillText("SNAKE", canvas.width / 2, canvas.height / 2 - 20);
ctx.font = "14px Arial";
ctx.fillText("Press START", canvas.width / 2, canvas.height / 2 + 10);
</script>

</body>
</html>
